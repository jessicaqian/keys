{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>{% block title %}{% endblock %}</title>
	<link href="{% static "bootstrap-3.3.7-dist/css/bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static  "system/css/base.css" %}" rel="stylesheet">
    <link rel="shortcut icon" href="#" />
    {% block css %}{% endblock %}
	<script src="{% static "jquery-1.9.1/jquery.min.js" %}"></script>
	<script src="{% static "bootstrap-3.3.7-dist/js/bootstrap.min.js" %}"></script>
	<script src="{% static "bootstrap-3.3.7-dist/js/bootstrap-notify.min.js" %}"></script>
</head>
<body>


<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
        {% block modal-content %}{% endblock %}
    </div>
  </div>
</div>

<!-- Modal1 -->
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
        {% block modal-content-1 %}{% endblock %}
    </div>
  </div>
</div>




<div class="container-fluid">
    <div class="row">
        <div id="title">
            <p class="col-md-11">中控服务器管理平台</p>
            <div  id="logout">
                <a href="/" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}" style="color: white">
                    <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> 退出</a>
            </div>
            <div>
                {% if messages %}
                    {% for msg in messages %}
                        {{ msg }}
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2">
            <ul class="nav nav-pills nav-stacked">
                <li role="presentation" class="nav_bar" id="main"><a href="main.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                    <span class="glyphicon glyphicon-stats" aria-hidden="true"></span> 资产概况总览</a>
                </li>
                <li role="presentation" class="nav_bar" id="edit">
                    <a id="flow" role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                    <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 设备管理配置</a>
                    <div class="collapse" id="collapseExample">
                        <ul class="nav nav-pills nav-stacked">
                            <li role="presentation" class="nav_bar_inner" id="dev_free"><a href="free.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> 新增设备配置</a>
                            </li>
                            <li role="presentation" class="nav_bar_inner" id="dev_configed"><a href="configed.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> 管理设备配置</a>
                            </li>
                            <li role="presentation" class="nav_bar_inner" id="dev_template"><a href="template.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                                <span class="glyphicon glyphicon-file" aria-hidden="true"></span> 配置模板管理</a>
                            </li>
                            <li role="presentation" class="nav_bar_inner" id="dev_task"><a href="task.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                                <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span> 任务模板管理</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li role="presentation" class="nav_bar" id="usr"><a href="usradmin.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                    <span class="glyphicon glyphicon-user" aria-hidden="true"></span> 用户账号管理</a>
                </li>
                <li role="presentation" class="nav_bar" id="log">
                    <a id="flowLog" role="button" data-toggle="collapse" href="#collapseLog" aria-expanded="false" aria-controls="collapseExample">
                    <span class="glyphicon glyphicon-book" aria-hidden="true"></span> 运行日志管理</a>
                    <div class="collapse" id="collapseLog">
                        <ul class="nav nav-pills nav-stacked">
                            <li role="presentation" class="nav_bar_inner" id="log_user"><a href="log_user.html">
                                <span class="glyphicon glyphicon-user" aria-hidden="true"></span> 用户操作日志</a>
                            </li>
                        </ul>
                        <ul class="nav nav-pills nav-stacked">
                            <li role="presentation" class="nav_bar_inner" id="log_sys"><a href="log_system.html">
                                <span class="glyphicon glyphicon-cog" aria-hidden="true"></span> 系统运行日志</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li role="presentation" class="nav_bar" id="ip"><a href="createip.html" onclick="if(window.location.href.indexOf('config.html?id')>0){return confirm('确定放弃正在编辑的配置吗?');}
                    else if(window.location.href.indexOf('tempAction?name')>0||window.location.href.indexOf('newtemp.html')>0||window.location.href.indexOf('task_edit.html')>0)
                    {return confirm('确定放弃正在编辑的模板吗?');}">
                    <span class="glyphicon glyphicon-hdd" aria-hidden="true"></span> 可视化管理平台</a>
                </li>
            </ul>
        </div>
        <div class="col-md-10">
            {% block content %}{% endblock %}
        </div>
    </div>

    <script type="text/javascript">
        setInterval(consumeMsg, 2000);
        function consumeMsg() {
            $.post("consumeMsg").done(function (data) {
                if(data && data.msg) {
                    $.notify({
                        icon: 'glyphicon glyphicon-warning',
                        message: data.msg
                    }, {
                        type: "danger",
                        placement: {
                            from: "bottom",
                            align: "right"
                        },
                        spacing: 10,
                        timer: 0
                    });
                }
            }).fail(function () {

            })
        }
    </script>
</div>

{% block js %}
{% endblock %}
</body>
</html>
